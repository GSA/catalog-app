---
# To apply this manifest: cf push --vars-file vars.yml
applications:
  - name: ((app_name))-solr
    docker:
      image: datagov/catalog-solr:inventory
    routes:
    - route: ((app_name))-solr.apps.internal
    memory: 256M
    
  - name: ((app_name))-fgdc2iso
    docker:
      image: datagov/catalog-fgdc2iso:latest
    routes:
    - route: ((app_name))-fgdc2iso.apps.internal
    memory: 384M
    env:
      SIGNATURE:

  - name: ((app_name))
    buildpacks:
      - https://github.com/cloudfoundry/python-buildpack#v1.7.6
    random-route: true
    services:
    - ((app_name))-db
    - ((app_name))-redis
    env:
      SOLR_URL: http://((app_name))-solr.apps.internal:8983/solr/ckan2_3
      FGDC2ISO_URL: http://((app_name))-fgdc2iso.apps.internal:8080/fgdc2iso
    memory: 256M
